(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],{23:function(e,t,a){e.exports=a(41)},28:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(16),r=a.n(s),l=a(8),o=a(3),u=(a(28),a(29),a(1)),m=a(11),i=a.n(m),d=a(17),f=a(18),E=a(19),b=a(22),p=a(21),h=(a(31),function(e){var t=e.users;return c.a.createElement("table",{className:"table",border:"2"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Id"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Username"),c.a.createElement("th",null,"Email"),c.a.createElement("th",null,"Website"),c.a.createElement("th",null,"Company"),c.a.createElement("th",null,"City"),c.a.createElement("th",null,"Posts"))),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.username),c.a.createElement("td",null,e.email),c.a.createElement("td",null,e.website),c.a.createElement("td",null,e.company.name),c.a.createElement("td",null,e.address.city),c.a.createElement("td",null,c.a.createElement(l.b,{activeClassName:"is-active",className:"nav__link",to:"/posts"},"Posts")))}))))}),v="https://jsonplaceholder.typicode.com",_=function(e,t){return fetch("".concat(v).concat(e),t).then((function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText));return e.json()})).then((function(e){return e}))},N=function(){return _("/users")},y=function(e){Object(b.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={users:[]},e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,this.setState({users:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.users;return c.a.createElement(h,{users:e})}}]),a}(c.a.Component),j=(a(37),function(e){var t=e.filterByPosts,a=e.setUserSelect,n=e.userSelect,s=e.users;return c.a.createElement("header",{className:"App__header"},c.a.createElement("label",null,"Select a user: \xa0",c.a.createElement("select",{className:"App__user-selector",name:"user",value:n,onChange:function(e){var n=e.target;a(n.value),t(n.value)}},c.a.createElement("option",{value:"0"},"All users"),s.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))))}),O=(a(38),c.a.memo((function(e){var t=e.loadComments,a=Object(n.useState)(""),s=Object(o.a)(a,2),r=s[0],l=s[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),i=m[0],d=m[1],f=Object(n.useState)(""),E=Object(o.a)(f,2),b=E[0],p=E[1],h=function(e){var t=e.target,a=t.name,n=t.value;switch(a){case"name":l(n);break;case"email":d(n);break;case"body":p(n)}};return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(r,i,b),l(""),d(""),p("")},className:"NewCommentForm"},c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:r,onChange:h,required:!0})),c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:i,onChange:h,required:!0})),c.a.createElement("div",{className:"form-field"},c.a.createElement("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:b,onChange:h,required:!0})),c.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add a comment"))}))),C=function(e){return _("/comments?postId=".concat(e))},P=function(e){var t,a,n=e.userId,c=e.newName,s=e.newEmail,r=e.newBody;return t="/comments",a={postId:n,name:c,email:s,body:r},fetch("".concat(v).concat(t),{method:"POST",body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return e.data}))},k=(a(39),function(e){var t=e.userId,a=e.post,s=Object(n.useState)([]),r=Object(o.a)(s,2),l=r[0],u=r[1],m=Object(n.useState)(!1),i=Object(o.a)(m,2),d=i[0],f=i[1];Object(n.useEffect)((function(){C(t).then((function(e){u(e)}))}),[t]);var E=Object(n.useCallback)((function(e,a,n){P({userId:t,newName:e,newEmail:a,newBody:n}).then((function(){return C(t)})).then(u)}),[t]),b=function(e){(function(e){return fetch("".concat(v,"/comments/").concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){return e}))})(e).then((function(){return C(t)})).then(u)},p=function(e){(function(e){return fetch("".concat(v,"/comments/").concat(e),{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify()}).then((function(e){return e.json()})).then((function(e){return e}))})(e).then((function(){return C(t)})).then(u)};return a?c.a.createElement("div",{className:"PostDetails"},c.a.createElement("h2",null,"Post details:"),c.a.createElement("section",{className:"PostDetails__post"},c.a.createElement("p",null,c.a.createElement("strong",null,"Title:"," "),a.title)),c.a.createElement("section",{className:"PostDetails__post"},c.a.createElement("p",null,c.a.createElement("strong",null,"Body:"," "),a.body)),c.a.createElement("section",{className:"PostDetails__comments"},c.a.createElement("button",{type:"button",className:"button PostDetails__button",onClick:function(){f(!d)}},"Hide ".concat(l.length," comments")),d&&c.a.createElement("ul",{className:"PostDetails__list"},l&&l.map((function(e){return c.a.createElement("li",{key:e.id,className:"PostDetails__list-item"},c.a.createElement("button",{onClick:function(){b(e.id)},type:"button",className:"PostDetails__remove-button button"},"Delete"),c.a.createElement("button",{onClick:function(){p(e.id)},type:"button",className:"PostDetails__remove-button button"},"Edit"),c.a.createElement("p",null,e.body))})))),c.a.createElement("section",null,c.a.createElement("div",{className:"PostDetails__form-wrapper"},c.a.createElement(O,{loadComments:E})))):"Loading..."}),w=a(4),S=a.n(w),I=(a(40),c.a.memo((function(e){var t=e.filterPosts,a=e.selectUserId,n=e.userId;return c.a.createElement("div",{className:"PostsList"},c.a.createElement("h2",null,"Posts: ".concat(t.length)),c.a.createElement("ul",{className:"PostsList__list"},t.map((function(e){return c.a.createElement("li",{className:"PostsList__item",key:e.id},c.a.createElement("div",null,c.a.createElement("b",null,"[User: ".concat(e.userId,"]")," "),e.title),c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){a(e.id===n?0:e.id,e)}},n===e.id?"Close":"Details"))}))))})));I.propTypes={filterPosts:S.a.arrayOf(S.a.shape({id:S.a.number.isRequired,title:S.a.string||null.isRequired,userId:S.a.number||null.isRequired})).isRequired,selectUserId:S.a.func.isRequired,userId:S.a.number.isRequired};var g=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)([]),m=Object(o.a)(r,2),i=m[0],d=m[1],f=Object(n.useState)(0),E=Object(o.a)(f,2),b=E[0],p=E[1],h=Object(n.useState)([]),v=Object(o.a)(h,2),O=v[0],C=v[1],P=Object(n.useState)(O),w=Object(o.a)(P,2),S=w[0],g=w[1],D=Object(n.useState)(0),U=Object(o.a)(D,2),q=U[0],A=U[1];Object(n.useEffect)((function(){N().then((function(e){s(e.sort((function(e,t){return e.id-t.id})))})),_("/posts").then((function(e){C(e),g(e)}))}),[]);var x=Object(n.useCallback)((function(e,t){A(e),d(t)}),[]),T=Object(n.useCallback)((function(e){g("0"!==e?O.filter((function(t){return+t.userId===+e})):O.map((function(e){return e})))}),[S]);return c.a.createElement("div",{className:"App"},c.a.createElement(l.b,{activeClassName:"is-active",className:"nav__link",to:"/",exact:!0},"Home"),c.a.createElement(l.b,{activeClassName:"is-active",className:"nav__link",to:"/users"},"Users"),c.a.createElement(l.b,{activeClassName:"is-active",className:"nav__link",to:"/posts"},"Posts"),c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/",exact:!0},c.a.createElement("h1",{className:"home"},"HOME")),c.a.createElement(u.b,{path:"/users"},c.a.createElement(y,null)),c.a.createElement(u.b,{path:"/posts"},c.a.createElement(j,{filterByPosts:T,setUserSelect:p,userSelect:b,users:a}),c.a.createElement("main",{className:"App__main"},c.a.createElement("div",{className:"App__sidebar"},c.a.createElement(I,{filterPosts:S,selectUserId:x,userId:q})),0!==q&&c.a.createElement("div",{className:"App__content"},c.a.createElement(k,{userId:q,post:i})))),c.a.createElement(u.a,{to:"/"}),c.a.createElement("p",null,"\u0429\u043e\u0441\u044c \u044f \u0437\u0430\u0431\u043b\u0443\u0434\u0438\u0432\u0441\u044f")))};r.a.render(c.a.createElement(l.a,null,c.a.createElement(g,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.ae705ac6.chunk.js.map